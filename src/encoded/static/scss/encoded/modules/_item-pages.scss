/**** VARIABLES ****/

// We make this almost full height.
// - IMPORTANT -
// Equivalent of this is performed in JS in PedigreeViz, for browsers
// which do not yet support calc().
// If change size of footer, header, navbar, sub-navbar, etc. then this 216px must
// be adjusted here and in JS
// This is originally from PedigreeViz and now reused for places where we want a minimum height
// to match full height of window, minus navbar, tabbar, and tab title heading.
$inner-tab-contents-full-height: calc(100vh - 216px);

/* used also for new utility class - not sure is best name */
.mh-inner-tab-height-full {
	min-height: $inner-tab-contents-full-height !important;
}



/*************************
        TabbedView
**************************/

/** These are re-used for a few things outside of TabbedView **/

.tab-section-title {
	font-weight: 300;
	margin: 0;
	min-height: 78px;
	display: flex;
	align-items: center;
	justify-content: space-between;
	/*
	@include media-breakpoint-only(xs){
		flex-direction: column;
		align-items: flex-start;
		justify-content: center;
		padding-top: 10px;
		padding-bottom: 10px;
	}
	*/
}

h3.tab-section-title {
	line-height: 24px;
}
/*
h4.tab-section-title {
  padding-top: 36px;
  padding-bottom: 12px;
}
*/
hr.tab-section-title-horiz-divider {
	/* Use classes 'mb-0', 'mb-1', etc. to set margins */
	margin-top: 0;
	margin-bottom: 0;
	border-top-color: #ccc;
}

.tabview-title-controls-container {
    font-size: 1rem;
	padding-left: 5px;
	padding-top: 10px;
	padding-bottom: 10px;

    // For mobile/smaller widths.
    button.toggle-open-button {
        @include button-no-focus-outline;
    }

    > .toolbar-wrapper > .btn-toolbar {
		justify-content: flex-end;

        > .btn-group {
            float: none;
        }
    }

    .checkbox-container {
        margin-right: 15px;
        margin-top: 0;
        margin-bottom: 0;
        line-height: 1.5rem;
        display: block;
        padding-top: 7px;
        padding-bottom: 5px;
        font-size: 0.95rem;
        @include user-select(none);
        &.disabled{
            color: #999;
        }
        > label {
            margin-bottom: 0;
        }
    }

    button#rowspacingtype-select {
        min-width: 120px;
    }

    /** Only shown/visible at smaller sizes **/
    > .inner-panel:first-child {
        min-width: 200px;
        padding-left: 10px;
        padding-bottom: 10px;
        > hr {
            margin-top: 10px;
            margin-bottom: 0;
        }
        > .mobile-size-elem {
            > .dropdown.btn-group,
			> .dropdown.btn-group > button.btn,
			> .dropdown,
			> .dropdown > .btn,
            > button.btn {
				width: 100%;
				margin-left: 0 !important;
				margin-right: 0 !important;
                text-align: left;
            }
        }
    }
}

/*************************
    TABVIEW + Alerts
**************************/

$tabbar-bg-color : #ececec !default;
$tabbar-text-color : #333 !default;
$tabbar-text-active-color: #000 !default;
$tabbar-bg-active-color: #fff !default;
// If override this, check e.g. CaseView Pedigree Tab height dimensioning (JS) since this 46px is accounted for in calculations
$tabbar-height: 46px;

.item-page-container {

	.tabs-bar-outer {
		display: block;
		//position: sticky;
		//top: 41px;
		//z-index: 50;
		div.tabs-bar {
			display: flex;
			background-color: $tabbar-bg-color;
			height: $tabbar-height;
			align-items: center;
			overflow-x: auto;

			// Firefox
			scrollbar-width: 3px;
			scrollbar-track-color: $tabbar-bg-color;
			scrollbar-color: #777;

			// Chrome, Safari
			&::-webkit-scrollbar {
				height: 3px;
				width: 3px;
				background-color: #fff;
				background-color: $tabbar-bg-color;
				border-bottom: 1px solid darken($tabbar-bg-color, 10%);
			}

			&::-webkit-scrollbar-thumb {
				background-color: #777;
			}

			> .tab-item {
				display: flex;
				align-items: center;
				flex-shrink: 0;
				padding-left: 16px;
				padding-right: 16px;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
				max-width: 200px;
				color: $tabbar-text-color;
				height: 100%;
				border-bottom: 1px solid darken($tabbar-bg-color, 10%);
				border-right: 1px solid transparent;
				text-decoration: none;

				&:not(:first-child){
					border-left: 1px solid darken($tabbar-bg-color, 20%);
				}

				&.active {
					background-color: $tabbar-bg-active-color;
					color: $tabbar-text-active-color;
					border-bottom-color: transparent;
					box-shadow: 0.5px -3px 3px -1px #000;
				}

				&.disabled {
					color: transparentize($tabbar-text-color, 0.5);
				}

				i.icon + span {
					margin-left: 8px;
				}

				&.clickable:not(.active):hover {
					background-color: lighten($tabbar-bg-color, 5%);
					z-index: 10;
				}

				// Title shown at left (prefix)
				&.title-tab {
					max-width: 320px;
					background-color: lighten($tabbar-bg-color, 5%);
					flex-shrink: 0;
					> div.row {
						max-width: inherit;
						flex-wrap: nowrap;
						> .item-type-title {
							font-weight: 600;
							max-width: 150px;
							overflow: hidden;
							text-overflow: ellipsis;
							+ .item-title:before {
								/** Emulate FontAwesome Icon styling **/
								display: inline-block;
								content: "\f105"; // "\f054" - chevron
								font-family: $fa-font-family;
								font-weight: 900;
								line-height: 1;
								position: relative;
								left: -10px;
								vertical-align: middle;
							}
						}
						> .icon-col {
							padding: 0;
							> i.icon {
								vertical-align: middle;
							}
						}
						> .item-title {
							overflow: hidden;
							text-overflow: ellipsis;
						}
					}
				}

				// Menu icon shown at right
				&.menu-tab {
					max-width: none;
					flex-grow: 1;
					flex-shrink: 0;
					justify-content: flex-end;
					padding: 0; // Child of tab will have padding
					.icon-container {
						padding-left: 16px;
						padding-right: 16px;
						height: 100%;
						display: flex;
						align-items: center;
						//i.icon-bars:only-child {
						//	margin: 0;
						//}
					}
				}
			}
		}

		/** For smaller screen sizes, we make this menu stack instead of horizontal row **/
		@include navbar-static-position {
			position: relative;
			top: 0;
			div.tabs-bar {
				flex-direction: column;
				height: auto;
				align-items: stretch;
				> .tab-item {
					height: $tabbar-height;
					max-width: none !important;
					&.active {
						border-bottom-color: darken($tabbar-bg-color, 10%);
						box-shadow: none;
					}
					&.menu-tab {
						justify-content: flex-start;
						> .icon-container {
							flex-grow: 1;
						}
					}
				}
			}
		}

	}

}

/*************************
    Error Pane / MSG - todo maybe propagate to other error msgs.
**************************/

.item-page-container {
	.error-boundary-container {
		display: flex;
		align-items: center;

		.error-msg-container {
			width: 100%;
		}
	}

	.tab-pane-outer {
		> .error-boundary-container {
			/* When in top-level tab, have it be near-full-height to center contents */
			height: calc(100vh - 136px);
		}
	}
}

/** Usually a child of error-boundary-container (above) but not necessarily **/
.error-msg-container {
	border: 1px solid #6b0101;
	color: #6b0101;
	padding-top: 18px;
	padding-bottom: 18px;
	padding-left: 20px;
	padding-right: 20px;
	align-items: center;
	border-radius: 10px;
	&.row {
		margin-left: 0;
		margin-right: 0;
	}
	> i.icon-times {
		color: inherit;
		width: 2.5rem;
		font-size: 1.5rem;
	}
	> .title-wrapper {
		color: inherit;
		> * {
			color: inherit;
		}
	}
}

/*************************
	Alerts - Shown differently on ItemPages than others
	(same styling also applied to homepage)
**************************/

#full-alerts-container {
	position: sticky;
	z-index: 500;
	top: 0px;

	@include navbar-fixed-position {
		top: 40px;
	}

	> .alerts {
		> .alert {
			margin-bottom: 0px;
			border-radius: 0;
			border-left: none;
			border-right: none;
			border-top: none;
			&:last-child {
				border-bottom: none;
			}
		}
	}
}

/** Styling right pane menu which comes out upon ItemActionsTab click **/

#slide-in-pane-container {
    > .slide-in-pane-outer {
        > .item-page-actions-menu {
			// Maybe make this more reusable (?)
            > .title-box {
                padding: 12px 18px;
                border-bottom: 1px solid #ccc;
                box-shadow: inset 0 -2px 5px -5px #000;

                label {
                    font-weight: 400;
                    margin-bottom: 1px;
                    color: #777;
                }
                h4, h3 {
                    font-weight: 300;
                    margin: 0;
                    white-space: nowrap;
                    overflow-x: hidden;
                    text-overflow: ellipsis;
                }

                i.icon.icon-times {
                    font-size: 1.25rem;
                    color: #777;
                    padding-top: 7px;
                    &:hover {
                        color: #000;
                    }
                }
			}

			> .menu-inner {
				> .menu-option {
					padding: 12px 18px;
					border-bottom: 1px solid #eee;
					display: block;
					h4, h5, h6 {
						font-weight: 500;
						margin: 0;
						+ .description {
							font-size: 0.925rem;
							white-space: nowrap;
                    		overflow-x: hidden;
                    		text-overflow: ellipsis;
						}
					}
					&:hover {
						background-color: #f8f8f8;
					}
					.icon-container {
						display: flex;
						align-items: center;
						> .icon-fw {
							transition: transform .25s ease-out;
						}
					}
					// Show to right of icon-container, if 1 present, else not present
					.title-col {
						white-space: nowrap;
						overflow-x: hidden;
						text-overflow: ellipsis;
					}
				}

				> a.menu-option {
					color: $body-color;
					&:hover {
						text-decoration: none;
					}
				}

				&:hover {
					> .menu-option {
						.icon-container > .icon-fw {
							transform: scale3d(.85, .85, 1);
						}
						&:hover .icon-container > .icon-fw {
							transform: scale3d(1.15, 1.15, 1) !important;
						}

					}
				}

			}

        }
    }
}



/*************************
		SUBMISSIONS
**************************/

/** TODO: perhaps move into own file **/

// For submissions page headers
h3.submission-subtitle {
	font-weight: 400;
	display: inline-block;
}

.submission-page-heading {
    position: relative;
    background-color: #f4f4f4;
	border-radius: 2px;
	border: 1px solid #ddd;
	min-height: 42px;
	padding: 10px 15px 8px;

	h1, h2, h3, h4, h5, h6 {
        margin: 0;
    }
}

.submission-btn {
	background-color: #f4f4f4;
	border-color: #f4f4f4;
	margin-left: 5px;
	padding-left: 5px;
	padding-right: 5px;
	box-shadow: none;
}

.submission-btn:hover, .submission-btn:focus{
	background-color: #ddd;
	border-color: #f4f4f4;
}


/*** Status Color Styles & Indicators ***/

// TODO: Move to more common/utility-like place.

@mixin statusColorStyles {

	// Blue
	&[data-status="Benign"]:before,
	&[data-status="Not a candidate"]:before,
	&[data-status="Known gene for phenotype"]:before {						// Applicable to ClinVar Clinical Significance
		color: #fff;
		background-color: $primary;
	}

	// Dark Blue
	&[data-status="Likely benign"]:before,
	&[data-status="Weak candidate"]:before {					// Applicable to ClinVar Clinical Significance
		color: #fff;
		background-color: $primary-dark;
	}

	// Green
	&[data-status="current"]:before,						// Applicable to Item.status
	&[data-status="shared"]:before,							// Applicable to Item.status
	&[data-status="released"]:before,						// Applicable to Item.status
	&[data-status="uploaded"]:before,						// Applicable to File.status
	&[data-status="public"]:before,							// Applicable to Pages & UserContent
	&[data-status="complete"]:before,						// Applicable to WorkflowRun.run_status + columnExtensionMap columns
	&[data-status="protective"]:before {					// Applicable to ClinVar Clinical Significance
		color: #fff;
		background-color: #308756;
	}

	// Greener Yellow
	&[data-status="released to project"]:before {			// Applicable to Item.status
		color: #fff;
		background-color: #397855;
	}

	// Green-Yellow
	&[data-status="released to institution"]:before,		// Applicable to Item.status
	&[data-status="in public review"]:before,				// Applicable to Item.status
	&[data-status="uploading"]:before,						// Applicable to File.status
	&[data-status="output_files_transferring"]:before,		// Applicable to WorkflowRun.run_status
	&[data-status="output_file_transfer_finished"]:before {	// Applicable to WorkflowRun.run_status
		color: #fff;
		background-color: #80921c;
	}

	// Yellow
	&[data-status="in review"]:before,						// Applicable to Item.status
	&[data-status="started"]:before, 						// Applicable to WorkflowRun.run_status
	&[data-status="running"]:before,						// Applicable to WorkflowRun.run_status + columnExtensionMap columns
	&[data-status="in progress"]:before, 					// Applicable to columnExtensionMap columns
	&[data-status="incomplete"]:before, 					// Applicable to columnExtensionMap columns
	&[data-status="uncertain significance"]:before,			// Applicable to ClinVar Clinical Significance
	&[data-status="associaton"]:before {					// Applicable to ClinVar Clinical Significance
		color: #fff;
		background-color: #d8bd22;
	}

	// Maroon/dark-red
	&[data-status="replaced"]:before,						// Applicable to Item.status
	&[data-status="inactive"]:before,						// Applicable to Item.status
	&[data-status="revoked"]:before,						// Applicable to User.status
	&[data-status="probable-pathogenic"]:before,			// Applicable to ClinVar Clinical Significance
	&[data-status="Likely pathogenic"]:before,				// Applicable to SampleVariant Interpretation Classification
	&[data-status="Moderate candidate"]:before,
	&[data-status="affects"]:before,						// Applicable to ClinVar Clinical Significance
	&[data-status="restricted"]:before{						// Deprecated?
		color: #fff;
		background-color: #812423;
	}

	// Bright Red
	&[data-status="deleted"]:before,						// Applicable to Item.status
	&[data-status="upload failed"]:before,					// Applicable to File.status
	&[data-status="error"]:before,							// Applicable to WorkflowRun.run_status + columnExtensionMap columns
	&[data-status="risk factor"]:before,					// Applicable to ClinVar Clinical Significance
	&[data-status="Pathogenic"]:before, 					// Applicable to ClinVar Clinical Significance
	&[data-status="Strong candidate"]:before {
		color: #fff;
		background-color: #a90d0b;
	}

	// Purple
	&[data-status="to be uplodaded by workflow"]:before,	// Applicable to File.status
	&[data-status="other"]:before {							// Applicable to ClinVar Clinical Significance
		color: #fff;
		background-color: #47419a;
	}

	// Gray
	&[data-status="obsolete"]:before,						// Applicable to Item.status
	&[data-status="not implemented"]:before,				// Applicable to columnExtensionMap columns
	&[data-status="not started"]:before,					// Applicable to columnExtensionMap columns
	&[data-status="not provided"]:before,					// Applicable to ClinVar Clinical Significance
	&[data-status="Uncertain significance"]:before,			// Applicable to SampleVariant Interpretation Classification
	&[data-status="unspecified"]:before,					// Deprecated? Fallback for lack of status in some cases?
	&[data-status="Weak candidate"]:before,
	&[data-status="Known gene for phenotype"]:before {
	    color: #fff;
		background-color: #7b7b7b;
	}

	// Gray outline
	&[data-status="Not Available"]:before {
		border: 1px solid #adb5bd;
		background-color: #fff;
	}
}


i.status-indicator-dot {
	display: inline-block;
	position: relative;
	&:before {
		content: "";
		width: 9px;
		height : 9px;
		display: inline-block;
		position: relative;
		border-radius: 50%;
	}

	@include statusColorStyles;
}


@mixin acmgColorStyles {



	// Standalone Benign Impact -
	&[data-criteria="BA1"] {
		color: #31098D;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #31098D;
		}
		&:focus {
			outline-color: #31098D;
		}
	}
	// Strong Benign Evidence - 
	&[data-criteria="BS1"],
	&[data-criteria="BS2"],
	&[data-criteria="BS3"],
	&[data-criteria="BS4"] {
		color: #47419a;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #47419a;
		}
		&:focus {
			outline-color: #47419a;
		}
	}

	// Supporting Benign Evidence
	&[data-criteria="BP1"],
	&[data-criteria="BP2"],
	&[data-criteria="BP3"],
	&[data-criteria="BP4"],
	&[data-criteria="BP5"],
	&[data-criteria="BP6"],
	&[data-criteria="BP7"] {
		color: #0063D6;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #0063D6;
		}
		&:focus {
			outline-color: #0063D6;
		}
	}

	// Supporting Pathogenic Evidence
	&[data-criteria="PP1"],
	&[data-criteria="PP2"],
	&[data-criteria="PP3"],
	&[data-criteria="PP4"],
	&[data-criteria="PP5"] {
		color: #C4AA1D;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #C4AA1D;
		}
		&:focus {
			outline-color: #C4AA1D;
		}
	}

	// Moderate Pathogenic Evidence
	&[data-criteria="PM1"],
	&[data-criteria="PM2"],
	&[data-criteria="PM3"],
	&[data-criteria="PM4"],
	&[data-criteria="PM5"],
	&[data-criteria="PM6"] {
		color: #D36900;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #D36900;
		}
		&:focus {
			outline-color: #D36900;
		}
	}

	// Strong Pathogenic Evidence
	&[data-criteria="PS1"],
	&[data-criteria="PS2"],
	&[data-criteria="PS3"],
	&[data-criteria="PS4"]{
		color: #a90d0b;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #a90d0b;
		}
		&:focus {
			outline-color: #a90d0b;
		}
	}

	// Very Strong Pathogenic Evidence
	&[data-criteria="PVS1"] {
		color: #9A0000;
		background-color: #fff;

		&[data-invoked="true"] {
			color: #fff;
			background-color: #9A0000;
		}

		&:focus {
			outline-color: #9A0000;
		}
	}

	&[data-criteria="none"] {
		border: 1px dashed lightgrey;
	}
}

.acmg-invoker {
	border: 1px solid #efefef;
	padding: 3px 7px;
    font-size: 0.7em;
    letter-spacing: 0.05em;
	text-align: center;
	font-family: $font-family-monospace;
	font-weight: 600;

	@include acmgColorStyles;
}

.acmg-popover-strengths {
	>button.list-group-item { /* override the active color to match acmg rule color*/
		&.active {
			@include acmgColorStyles;
			border-color: rgba(0,0,0,0);
		}

		&:focus {
			color: inherit !important;
			@include acmgColorStyles();
		}
		
	}
}

.acmg-guidelines-title {
	padding: 5px 5px 5px 15px;
    min-width: 125px;
    align-self: center;
}

.acmg-guidelines-invoker {
	width: calc(100% - 145px);
    overflow-x: auto;
	height: 50px;
}


/**********************************************************
		     		Detail Tab
**********************************************************/

.item-page-detail {

	margin-bottom: 12px;

	.expandable-list {
		overflow: hidden;
	}

	.list-item.row {

		.item-label, .item-value {
			> div {
				min-height: 26px;
				height: 100%;
				word-break: break-all;

				padding-top: 8px;

			}
		}
		.item-label {
			font-weight: 500;
			flex-grow: 1;
			@include media-breakpoint-up(md){
				> div {
					border-bottom: 1px solid #eee;
					padding-bottom: 8px;
				}
			}
		}
		.item-value {
			flex-grow: 2;
			> div {
				border-bottom: 1px solid #eee;
				padding-bottom: 8px;
			}
		}
		ol {
			padding-left: 20px;
			margin-bottom: 0;
			//margin-top: 3px;
		}

		/** For embedded sub-objects **/
		.subitem-toggle {
			display: inline-block;
			> .link {
				@include user-select(none);
				color: #00cca3; // temporary?
				cursor:pointer;
				&:hover {
					color: #00cca3;
					text-shadow : 0 0 0;
				}
			}
			> i.icon {
				width: 20px;
			}
		}

		li > span > .subitem-toggle > i.icon {
			width: 20px;
			margin-left: -20px;
			background-color: #fff;
		}

		.data-display, .sub-panel {
			padding: 0;
			padding-top: 15px;
			> .sub-descriptions > .list-item:last-child > div.item-label > .inner,
			> .sub-descriptions > .list-item:last-child > div.item-value > .inner {
				border-bottom: none;
			}
		}

		&.array-group-row {
			&:not(.last-item):not(.open) {
				> .item-label, .item-value {
					> .inner {
						border-bottom-color: transparent;
						padding-bottom: 2px;
						min-height: 20px;
					}
				}
			}
			&:not(.first-item) {
				> .item-label, .item-value {
					> .inner {
						padding-top: 2px;
					}
				}
			}
			> .item-label {
				.label-number {
					transition: transform .3s ease-out, color .3s ease-out;
					transform: scale3d(0.85, 0.85, 0.85) translate3d(16px,1px,0);
					transform-origin: 100% 25%;
					margin-top: -1px;
					color: #888;
					.number-icon {
						opacity: 0;
						transition: opacity .3s ease-out;
					}
					&.active {
						color: #000;
						transform: scale3d(1,1,1);
						.number-icon {
							opacity: 1;
						}
					}
				}
				span.dim-duplicate {
					color: transparent;
					transition: color .3s ease-out;
					white-space: nowrap;
					overflow-x: hidden;
					text-overflow: ellipsis;
					i.icon {
						display: none;
					}
				}
			}
			//> .item-value {
			//	> .inner {
			//		border-bottom-color: transparent;
			//	}
			//}
		}

		&.open {
			> .item-label {
				> .inner {
					border-bottom-color: transparent;
					span.dim-duplicate {
						color: #bbb;
					}
				}
			}
			> .item-value {
				> .inner {
					border-bottom-color: transparent;
				}
			}
		}
		.detail-embedded-table-container {
			overflow-x: auto;
			table.detail-embedded-table {
				min-width: 100%;
				tr th {
					white-space: normal;
					word-break: normal;
					padding: 7px 4px;

					&.has-children {
						> .tooltip-info-container {
							padding-left: 36px;
							border-bottom: 1px solid #ddd;
							padding-bottom: 7px;
						}
					}

					.sub-list-keys-header {
						margin-left: -4px;
						margin-right: -4px;
						> div.inline-block {
							padding: 5px 8px 0px;
						}
						div.child-list-row-number {
							width: 36px;
						}

					}
				}
				tr td {
					word-break: normal;
					padding: 7px 8px;
					&.child-list-row-container {
						padding: 0;
						border-left: 1px dotted #ccc;
						border-right: 1px dotted #ccc;
						border-bottom: 1px solid #ddd;
					}
					&.no-word-break {
						white-space: nowrap;
					}
				}
				tr:not(:last-child) {
					border-bottom: 1px solid #eee;
				}
				.child-list-row {
					> div {
						padding: 5px 8px;
						text-align: center;
					}
					&:not(:last-child) {
						border-bottom: 1px dotted #eee;
					}
					div.child-list-row-number {
						width: 36px;
					}
				}
			}
		}

	}

	@include media-breakpoint-down(sm){
		/* Deprecated ? */
		.array-group .array-group-row.list-item:not(.first-item) {
			.item-label {
				display: none;
			}
		}
	}

	.sub-panel {
		padding-left: 40px;
		padding-bottom: 0;
		margin-bottom: 8px;
		border-bottom: 1px dotted #bbb;
		border-left: 1px dotted #aaa;
		.item-label {
			.tooltip-info-container {
				white-space: nowrap;
				overflow-x: hidden;
				text-overflow: ellipsis;
			}
		}
	}

}

/** JSON Tree Wrapper (e.g. fallback view) **/

.json-tree-wrapper {
	border-radius: $border-radius-lg;
	overflow: hidden;
	> ul {
		padding: 8px 16px 16px !important;
		margin: 0 !important;
	}
}


/**********************************************************
	Processing Summary Table (CaseView > Bioinfo Tab)
	Move into own file?
**********************************************************/

.primary-header {
	background-color: $primary-dark !important;
	color: #ffffff;
	h1, h2, h3, h4, h5, h6 {
		color: inherit;
	}
}

.item-page-container {

	.case-summary-card-row{
		display: flex;
		flex-wrap: wrap;
		margin: 0 -10px;

		#case-stats {
			.row.overlapping .card {
				position: absolute;
				width: calc(100% - 20px);
				z-index: 1;
			}
		}

		@include media-breakpoint-up(lg){
			min-height: 320px;
		}

		> .col-stats,
		> .col-pedigree-viz {
			padding: 0 10px;

			@include media-breakpoint-up(lg){
				min-height: 358px;
			}
		}

		> .col-stats {
			flex-grow: 1;
			flex-shrink: 0;
			flex-basis: 100%;
			> #case-stats {
				min-height: 100%;
			}

			@include media-breakpoint-up(lg){
				flex-basis: 0px;
			}
		}

		> .col-pedigree-viz {
			flex-grow: 0;
			flex-shrink: 0;
			flex-basis: 100%;
			padding: 0 10px;

			> .card {
				@include media-breakpoint-up(lg){
					height: 100%;
				}

				.pedigree-viz-container .inner-container {
					background-color: transparent; // let BG color from .card bleed through to allow border radius to appear nicely.
				}
			}

			@include media-breakpoint-up(lg){
				flex-grow: 0;
				flex-shrink: 0;
				box-sizing: content-box; // Easier to handle width outside of padding.
				flex-basis: 400px;
			}

			@include media-breakpoint-up(xl){
				flex-basis: 560px;
			}

			@media (min-width: 1680px) {
				flex-basis: 800px;
			}
		}
	
	}

	#case-overview-ped-link {
		/* max-height: 336px; */
		margin-left: 0;

		// > .card {
		// 	@include media-breakpoint-down(lg){
		// 		margin-top: 70px;
		// 		border-bottom-right-radius: $card-border-radius; // prev: 10px;
		// 		border-bottom-left-radius: $card-border-radius; // prev: 10px;
		// 	}
		// }

		div.pedigree-vis-heading {

			.view-pedigree-btn {
				background-color: cornflowerblue; // TODO: Once settle on good color, maybe apply it to our theme under a SCSS variable for re-use. Then ctrl+find+replace.
				border-radius: 40px;
				color: #fff;
				/* border: 1px solid cornflowerblue; */
				border: none;
				padding: 4px 24px 3px;
				&:hover {
					background-color: darken($color: cornflowerblue, $amount: 7.5%);
				}
			}
		}

		.pedigree-placeholder {
			position: relative;
			// We usually don't want to use this without having a fallback for older browsers
			height: 300px; // Nice round number, idk.
			height: calc(100% - 58px);
			i.icon.icon-sitemap { // Quick vertical center
				position: absolute;
				top: 50%;
				left: 50%;
				margin-left: -40px;
				margin-top: -32px;
			}
			border: 1px solid #eee;
			color: #999;
			@include border-radius($card-border-radius); // Same as .card (Bootstrap v4)
			transition: color .3s;
			&:not([disabled]):hover {
				cursor: pointer;
				color: #777;
				border-color: #ddd;
			}
		}

	}

	label.badge-list-label {
		padding-right: 3px;
		margin-bottom: 0;
	}
	.badge-list {
		list-style: none;
		padding-left: 0;
		margin-bottom: 0;
		display: inline;

		> li {
			display: inline-block;
		}
	}

	.processing-summary-tables-container {

		.embedded-search-view-outer-container {
			// (Can't remember:) Margins might be needed here
			// to accomodate presence of both vertical + horizontal scroll bars.
			// I guess we'll find out at some point.

			.search-result-row {
				&:last-of-type {
					margin-bottom: 0px;
				}
			}
			.embedded-search-container .fin.search-result-row {
				display: none;
			}

		}


		
	}

	.tab-router {
		.dot-tab-nav {
			position: relative;
			z-index: 5;
			border-top: 1px solid #ddd;
			border-bottom: 1px solid #ddd;
			

			.dot-tab-nav-list {
				list-style-type: none;
				margin: 0;
				padding: 0;
				display: flex;
				justify-content: space-evenly;

				@include media-breakpoint-down(md) {
					flex-direction: column;
				}

				.arrow-tab {
					flex-grow: 1;
					display: flex;
					height: $search-results-header-row-height; // Eh why not re-use this, can change always in future.

					padding: 0;
					border: none;
					background: transparent;

					@include media-breakpoint-down(md) {
						margin-bottom: 5px;
					}

					> div.btn-title {
						background-color: cornflowerblue;
						transition: background-color .25s ease-out, box-shadow .5s;
						color: #ffff;
						height: 100%;
						text-align: center;
						padding: 10px;
						text-decoration: none;
						width: 100%;
						/* box-shadow: 0px 5px 16px -10px #000c; */

						display: flex;
						align-items: center;
						justify-content: center;

						&:focus:not(.active),
						&:active:not(.active) {
							outline: none;
						}
					}


					> .btn-append,
					> .btn-prepend {
						height: 100%;
						width: $search-results-header-row-height; // Same as height of parent
						flex: 1 0 0px;
						z-index: 2;
						> svg {
							height: 100%;
							width: auto;
							path {
								fill: cornflowerblue;
								transition: fill .25s ease-out;
							}
						}

						@include media-breakpoint-down(md) {
							display: none;
						}
					}

					&:not(.active) {
						// Applicable for when navigating with (shift-)tab w.o. mouse.
						&:focus,
						&:active {
							// Same :hover styling below, should get overriden by other styles
							// unless someone is using (shift-)tab to navigate instead of mouse cursor.
							> .btn-title {
								background-color: darken($color: cornflowerblue, $amount: 7.5%);
							}
							> .btn-prepend svg path,
							> .btn-append svg path {
								fill: darken($color: cornflowerblue, $amount: 7.5%);
							}
						}
					}

					@include media-breakpoint-up(lg) {

						flex-basis: 20%; /* <- dependendent on there being 5 of these tabs (keep in sync w. amount of tabs) */

						&:first-child {
							> .btn-prepend {
								display: none;
							}
							> .btn-title {
								padding-left: 24px;
								border-radius: $border-radius-base 0 0 $border-radius-base;
							}
						}

						&:last-child {
							> .btn-append {
								display: none;
							}
							> .btn-title {
								padding-right: 24px;
								border-radius: 0 $border-radius-base $border-radius-base 0;
							}
						}

					}

					&.disabled {
						> .btn-title {
							background-color: desaturate($color: lighten($color: cornflowerblue, $amount: 20%), $amount: 100%) !important;
						}
						> .btn-append > svg > path,
						> .btn-prepend > svg > path {
							fill: desaturate($color: lighten($color: cornflowerblue, $amount: 20%), $amount: 100%) !important;
						}
					}

					&:hover:not(.disabled):not(.active) {

						> .btn-title {
							background-color: darken($color: cornflowerblue, $amount: 7.5%) !important;
							/* box-shadow: 0px 5px 16px -10px #000; */
						}
						> .btn-append > svg > path,
						> .btn-prepend > svg >  path {
							fill: darken($color: cornflowerblue, $amount: 7.5%) !important;
						}
					}

					&.active {

						> .btn-title {
							// background-color: darken($color: cornflowerblue, $amount: 30%) !important;
							background-color: $primary-dark;
							cursor: default; // Since we're on tab already, clicking would have no effect, so dissuade somewhat.
							/* box-shadow: 0px 5px 16px -9px transparent; */
						}
						> .btn-append > svg > path,
						> .btn-prepend > svg > path {
							// fill: darken($color: cornflowerblue, $amount: 30%) !important;
							fill: $primary-dark;
						}
					}

				}
			}

		}
		.tab-router-contents {
			/* Help prevent sudden 'jumps' in screen (height and transitively in scroll position) from changing from tall to short tabs */
			/* We could consider also making min-height similar as parent tabs': `calc(100vh - (heights of footer + nav + sub-tab-nav))` */
			/* And in such way make it ... tall and fit neatly into view */
			min-height: 520px; // Fallback for older browsers
			min-height: calc(100vh - 89px - 126px); // '126px' subject to change re: dimensions of sub tab nav

			> .error-boundary-container {
				min-height: 448px; /* 520px parent min-height - 2 * 36px padding */
			}

			h1 {
				/* todo: consider using an h2 instead, as is 2.1rem by default (close to the 2rem set here) and */
				/* possibly more semantically accurate (i.e. is a section title, not page title) (subjective) */
				font-size: 2rem;
				margin-bottom: 36px; /* matches padding-bottom of timeline/tabs nav */
				margin-top: 0px;
			}

			/* 'Current Case' selection marker/styling */
			&#case-info\.accessioning {
				.current-case {
					padding: 0 5px;
					/* Cancel out the above padding somewhat to align text with other non-selected text */
					/* Maybe not cleanest approach... */
					margin: 0 -5px;
					outline: 2px solid $primary-dark;
					outline-offset: 3px;
					@extend .rounded-pill;
				}
			}

			/* Interpretation styles*/
			&#case-info\.interpretation {
				.card-header.section-header {
					font-weight: 400;
					margin: 0; /* overrides the default `margin: 10px 0` of header (h1, h2, ..) elems */
					
					a:hover > div.title-block > span {
						text-decoration: underline;
					}
				}
			}

			h2 {
				font-size: 1.5rem;
				font-weight: 400;
			}

			.tab-inner-container {
				margin-bottom: 20px;

				&.qc-status {
					font-size: 19px;
				}

				.card-header.section-header {
					background-color: $primary-dark;
					color: #ffff;
					font-weight: 400;
					margin: 0; /* overrides the default `margin: 10px 0` of header (h1, h2, ..) elems */
				}

				.processing-summary-table {
					width: 100%;
				}

				.stacked-block-table {
					.stacked-block-table-headers {
						background-color: $primary-dark;
						color: #ffffff;
					}

					.s-block.individual .col-individual .individual-role {
						text-align: left;
						align-items: start; // prevent 100% width, align to left.
					}
				
					.s-block.libraries .col-libraries > div {
						margin: 0 auto;
					}

					.accession-table {
						margin-left: 10px; 

						div.row {
							max-width: 100%;
							padding-top: 5px;
							padding-bottom: 5px;

							> div.col-auto,
							> div.col {
								padding-left: 0;
								padding-right: 0;
							}

							&:not(:last-child) {
								border-bottom: 1px solid #ddd;
							}
	
						}
						

						div.accession-table-title {
							font-weight: 600;
							text-align: left;
							min-width: 75px;
						}

						div:not(.accession-table-title) {
							text-align: left;
						}
					}
				}

				.row.qc-summary:not(:last-child) {
					padding-bottom: 5px;
				}

				.processing-summary-table-container {

					overflow-x: auto;
					-webkit-overflow-scrolling: touch;
		
					table.processing-summary-table {
		
						margin-top: 10px;
						min-width: 640px;
						width: 100%;
		
						thead {				
							> tr > th {
								padding: 6px 8px;
								
								&.hidden-th {
									background-color: #ffffff;
								}
							}
						}
		
						tbody {
							tr {
								td {
									padding: 4px 8px;
									/*
									&[data-for-column="individual"],
									&[data-for-column="sample"] {
										font-family: $font-family-monospace;
									}
									*/
									&[data-for-column="individual"]{
										.gen-identifier {
											display: inline-block;
											min-width: 45px;
											vertical-align: middle;
											font-weight: 600;
										}
									}
									i {
										font-size: 12px;
									}
								}
								&.is-even {
									background-color: rgba(0, 0, 0, 0.03);
								}
								&.is-proband {
									> td {
										background-color: #ebf6ff;
										&:first-child {
											font-weight: 600;
										}
									}
								}
								&[data-sample-index="0"] {
									> td {
										border-top: 1px solid #f8f8f8;
									}
								}
								&:not([data-sample-index="0"]) {
									> td[data-for-column="individual"] {
										visibility: hidden;
									}
								}
								.qcs-container {
									&.text-ellipses-container {
										max-width: 140px;
									}
									> span {
										display: inline-block;
										border-right: solid 1px #bbb;
										padding: 0 5px;
										&:last-child {
											border: none;
										}
									}
									a.qc-status-in-review {
										font-style: italic;
									}
								}
							}
						}
		
						tfoot {
							> tr > td {
								text-align: center;
								vertical-align: middle !important;
								padding: 2px 3px;
								border-top: 1px solid #eeeeee;
								background-color: #f1f1f1;
								
								&:not(.has-value) {
									background-color: #fff;
								}
							}
						}
					}
		
				}
			}

			/* Filtering Tab Specific styles */
			&#case-info\.filtering {
				// Styling overrides specific to embedded search table results for Structural Variants in case filtering
				.embedded-search-container .search-view-controls-and-results[data-search-item-type="StructuralVariantSample"],
				.embedded-search-container .search-view-controls-and-results[data-search-item-type="VariantSample"] {
					.search-result-row.detail-closed .columns.result-table-row {
						.search-result-column-block[data-field="display_title"][data-first-visible-column="true"] {
							/* Temporarily removed detail expansion pane in JS col ext map until we get specs for it; adjust padding to accomodate */
							/* important necessary to override default style (this is short term override/will be deleted soon so hopefully ok) */
							padding-left: 12px !important;
							.toggle-detail-button-container {
								display: none;
							}
						}
					}
				}

			}
		}
	}
	

	div.summary-table-container {

		padding-top: 10px;
		padding-bottom: 10px;

		> h4:first-child {
			margin-bottom: 0;
			font-weight: 400;
			margin-top: 10px;
			display: inline-block; // To decrease width of the clickable area to just the text width.
			> i.icon {
				color: #999;
			}

			&:hover {
				color: #000;
				text-shadow: 0 0 0;
				> i.icon {
					color: #000;
				}
			}
		}

		&:not(.family-index-0){
			border-top: 1px solid #ddd;
			padding-top: 10px;
		}

		div.processing-summary {
			margin-bottom: 10px;
		}

		&[data-is-current-family="true"] {
			> h4:first-child {
				> i.icon {
					color: $primary;
				}
			}
		}

	}

}


/**********************************************************
	CaseView -> FilterSetUI
	N.B. Some of the dimensions, i.e. padding top of ampersand,
	are dependent on font-size/face that we use.
**********************************************************/

@mixin clickable-hoverable-icon {
	opacity: 0.5;
	&:hover {
		opacity: 1;
	}
	&.disabled {
		opacity: 0.3;
		cursor: not-allowed;
	}
}

#case-info {

	.embedded-search-view-outer-container {

		// Stylistic adjustments
		.above-results-table-row {
			margin-top: 0px;
			padding-bottom: 0px;
			border-top: 1px solid $gray-300;
		}

	}
}


.filterset-preset-selection-outer-column {
	/** Responsive styling copied over from .facet-column in _search.scss **/
	/* (todo: maybe consider making it a mixin) */

	@include navbar-static-position {
		width: 100%;
	}

	@include navbar-fixed-position {
		width: 320px;
		flex-basis: 320px;
	}

	flex-shrink: 0;

	/** -- **/

	.filterset-preset-selection-body {

		/** Is located within the .filterset-outer-container **/
		/* border-right: 1px solid #777; */
		display: flex;
		flex-direction: column;

		.results-container {

			flex-basis: 300px; /* <- Min height, essentially */
			min-height: 300px;
			flex-grow: 1;
			flex-shrink: 1;

			/** keep scrollbar always visible for layout consistency (instd of overflow:auto) **/
			overflow-y: scroll;
			max-height: 100%;

			.preset-filterset-result {

				background-color: #fff;
				border-bottom: 1px solid #ddd;

				.title {
					height: 36px;
					padding-top: 8px;
					display: flex;
					align-items: center;
				}

				.title-icon-container {
					color: $secondary;
					font-size: 1rem; /* Unset from parent elem's .text-small */
					&.clickable {
						color: $primary;
						&:hover {
							color: $primary-dark;
						}
					}
				}

				.info {
					height: 36px;
					display: flex;
					align-items: center;

					.btn-dropdown-icon {
						/* Todo - make reusable everywhere ? */
						padding-left: 5px;
						padding-right: 5px;
						&:after {
							/* Hide down 'v' icon */
							display: none;
						}
					}

					.count-indicator-wrapper {

						svg {
							/** This seems to work well visually here. **/
							vertical-align: sub;
						}

						svg circle {
							fill: #999;
						}
					}

					.title-icon-container {
						button.import-preset-btn {
							line-height: 1.45;
						}
					}
				}

				&[data-is-origin-of-current-case-filterset="true"] {
					background-color: $light;

					&[data-is-current-case-filterset-unchanged="true"] {
						/* Similar color to filterset-block below, but lighter */
						background-color: lighten($primary, 55%);

					}
					
				}

				&[data-has-been-deleted="true"] {
					/* background: #fff4f4; */
					> .title,
					> .info {
						opacity: 0.4;
					}
				}

			}

		}

	}
}

.filterset-outer-container {
	// TODO CHANGE
	// border: 1px solid #999;
	/* background-color: desaturate(lighten($primary-dark, 45%), 30%); */ // #b4c8d8; // $gray-300;

	// background-color: #dedede;
	// border: 4px solid transparent;
	// transition: background-color .5s ease-out;

	h4 i.icon.clickable {
		@include clickable-hoverable-icon;
	}

	.filter-set-ui-header {
		/** Header **/
		/* Looks nice, enough to accomodate Save | Save As buttons, and gives us a concrete number to match FS preset selection UI header height to. */
		min-height: 65px;
	}

	&[data-is-open="false"] {
		.filter-set-ui-header {
			/* Appear more as button when closed */
			/* Same as parent .filterset-outer-container above */
			border-radius: $border-radius-lg;
			transition: border-radius .35s .35s ease-in;
		}
	}

}

.filterset-block {
	padding: 2px;
	text-rendering: geometricPrecision;
	// border-radius: $border-radius-lg;
	// border: 1px solid #8e8e8e;
	// background-color: #f1f1f1;

	.title-controls-row {

		.cached-counts-value {
			height: 24px;
			line-height: 20px;
			min-width: 24px;
			border: 2px solid transparent;
			padding: 0 3px;
			text-align: center;
			font-size: 0.75em;
			border-radius: 50%;
			&[data-count-exists="true"] {
				border-color: #0005;
			}
		}

	}

	.filter-query-viz-blocks {
				
		.field-block {
			position: relative;

			.value-blocks {
				.value-block {
					border-radius: 25px;
					padding: 5px 10px;
					background-color: #fff;
					position: relative;
					/* box-shadow: 0 2px 8px -3px #000; */
					white-space: nowrap;
					margin: 3px 0;
					flex-grow: 1;
					text-align: center;
					&:not(:last-child) {
						margin-right: 7px;
						&:after {
							content: "";
							height: 16px;
							top: 10px;
							top: calc(50% - 8px);
							border-right: 1px solid $gray-700;
							//transform: scale3d(0.75, 0.75, 0.75);
							right: -4px;
							position: absolute;
						}
					}
				}
			}

			.field-name {
				position: relative;
				padding-top: 5px;
				font-size: .925em;
				&:before {
					content: " ";
					position: absolute;
					top: -2px;
					height: 5px;
					border: 1px solid #444;
					left: -4px;
					right: -4px;
					border-top: none;
				}
			}

			&:not(:last-child) {
				margin-right: 15px;
				&:after {
					content: "&";
					transform: scale3d(0.75, 0.75, 0.75);
					right: -12px;
					top: 10px;
					top: calc(50% - 24px);
					position: absolute;
				}

			}

		}
	}
}

.filterset-blocks-container {

	background-color: #dedede;
	border-radius: 0 0 $border-radius-lg $border-radius-lg;
	border: 4px solid transparent;
	border-top: none;
	transition: background-color .4s .1s ease-in;


	/* While present as child of flex-grow-1 'column', stretch self to min-height of left presets column */
	min-height: 100%;
	display: flex;
	flex-direction: column;

	> .blocks-container {
		flex-grow: 1;
		overflow: auto;

		.filterset-block {

			border-radius: $border-radius-lg;
			border: 1px solid #8e8e8e;
			background-color: #f1f1f1;

			&:not(:last-child) {
				margin-bottom: 16px;
			}

			&.selected {
				border-width: 3px;
				padding: 0px;
				border-radius: $border-radius-lg + 2px;
				border-color: $primary-dark;
				background-color: lighten($primary, 50%);
				&.clickable:hover {
					@include user-select(none);
					// background-color: desaturate(lighten($primary, 50%), 15%);
					// transition: none;
				}
			}

			&.clickable:not(.selected):hover {
				// background-color: lighten($primary, 45%);
				border-width: 2px;
				padding: 1px;
				border-radius: $border-radius-lg + 1px;
				border-color: $primary-dark;
				transition: none;
			}

			&[data-duplicate-query="true"],
			&[data-name-value-differs-in-existing-selection="true"] {
				background-color: desaturate(lighten($danger, 45%), 10%);
				&.selected {
					border-color: desaturate(lighten($danger, 10%), 20%);
				}
			}

			.title-controls-row {

				i.icon.clickable {
					@include clickable-hoverable-icon;
				}

			}

		}

	}


	&[data-all-selected="true"] {
		border-color: $primary-dark;
		background-color: desaturate(lighten($primary-dark, 40%), 25%);

		> .blocks-container {

			 .filterset-block.selected {
				border-width: 1px;
				padding: 2px;
				border-radius: $border-radius-lg;
				border-color: desaturate(lighten($primary-dark, 15%), 25%);;
			}

			&:hover {
				.filterset-block.clickable.selected {
					&:hover {
						border-width: 2px;
						padding: 1px;
						border-radius: $border-radius-lg + 1px;
						border-color: $primary-dark;
					}
				}
			}
		}
	}

}

/* Used for Interpretation Tab */
.filterset-block-popover {
	> .arrow:after {
		border-top-color: #dedede;
	}
	> .popover-body {
		background-color: #dedede;
	}
}



/**********************************************************
	CaseView -> InterpretationTab + CaseReviewTab
**********************************************************/

.variant-sample-selection.card {

	h4.selected-vsl-title {
		font-size: 1.275rem; /* Slight decrease from h4 default of 1.3rem */

		> a:hover {
			/* Remove underline, icon changing should be enough.. */
			text-decoration: none;
		}

		i.icon {
			font-size: 0.725em;
		}

		> i.title-prefix-icon,
		> span {
			transition: color .3s;
		}

		> i.title-prefix-icon.icon-pen,
		> i.title-prefix-icon.icon-sticky-note {
			color: $gray-600;
		}

		&:hover > i.title-prefix-icon.icon-pen,
		&:hover > i.title-prefix-icon.icon-sticky-note {
			color: $primary-dark; //$gray-900;
		}
	}


	transition: border-color .5s ease-out;

	> .card-body,
	> .card-footer {
		/* maybe should add some more explit classNames */
		transition: opacity .5s ease-out;
	}

	&[data-is-deleted="true"] {
		border-color: transparentize($color: $danger, $amount: 0.25);
		box-shadow: none;
		> .card-body,
		> .card-footer {
			opacity: 0.3;
			pointer-events: none;
		}
	}

	

	.note-content-area {

		margin-top: 12px;
	
		@include media-breakpoint-up(md){
			min-height: 150px;
			max-height: 270px;
		}
	
		@include media-breakpoint-up(lg){
			max-height: 400px;
		}
	
		@include media-breakpoint-up(xl){
			max-height: 500px;
		}
	
		> .note-text-content {
			border-radius: $border-radius-sm;
			border: 1px solid #eee;
			padding: 12px;
			overflow: auto;
			white-space: pre-wrap;
		}
	
	}
	
}


/**********************************************************
  Report Findings Table (present in CaseView / CaseReviewTab & ReportView)
**********************************************************/


table.report-findings-table {
	thead, tbody {
		tr {
			td, th {
				text-align: left;
				padding: 0.4rem 0.75rem; // Reduce from 0.75rem;
			}
			th {
				border: none;
				background-color: $gray-400;
				text-transform: uppercase;
				&:first-child {
					border-top-left-radius: $border-radius-lg;
				}
				&:last-child {
					border-top-right-radius: $border-radius-lg;
				}
			}
			td {
				position: relative;
				&:first-child:after,
				&:last-child:after {
					content: " ";
					position: absolute;
					top: 0;
					bottom: 0;
					width: $border-radius-lg;
				}

				&:first-child:after {
					left: 0;
					border-left: 1px solid $gray-400;
				}
				&:last-child:after {
					right: 0;
					border-right: 1px solid $gray-400;
				}
			}
			&:last-child {
				td {
					&:before {
						content: " ";
						position: absolute;
						left: 0;
						right: 0;
						bottom: 0;
						height: $border-radius-lg;
						border-bottom: 1px solid $gray-400;
					}
					&:first-child:before,
					&:first-child:after {
						border-bottom-left-radius: $border-radius-lg;
					}
					&:last-child:before,
					&:last-child:after {
						border-bottom-right-radius: $border-radius-lg;
					}
				}
			}
		}
	}

	&.primary-theme {
		border-color: $primary-dark;
		thead, tbody {
			tr {
				td:before, td:after {
					border-color: $primary-dark;
				}
				th {
					background-color: $primary-dark;
					color: #fff;
				}
			}
		}
	}

}


/**********************************************************
  Report View & Print Preview
**********************************************************/

/* Print Preview Pane Effects */

.item-page-container {
	@media screen {
		/* Avoid adding these style to print media, since this page will be printed */
		.print-preview-pane {
			transition: opacity .75s 1s ease-in;
			.pagedjs_pages {
				.pagedjs_page {
					box-shadow: 0 0 1px 0px rgba(0,0,0,0.7);
					margin: 0 auto 16px;
				}
			}
		}

	}
}


/**********************************************************
  HiGlass Views
  TODO: Maybe put into own stylesheet and load only when/after need HiGlass
**********************************************************/

.higlass-wrapper {

	margin-bottom: 10px;

	.higlass-instance {

		margin-left: -10px;
		margin-right: -10px;
		height: 600px; // Default. May be overriden.
		transition: opacity 1s;
		opacity: 0;


		.TrackControl-module_track-control-2zDf3 { // Menu which appears on hover
			.TrackControl-module_track-control-button-2fdIb { // Hide "add track" button.
				display: none;
				&:nth-child(2),
				&:last-child,
				&:first-child {
					display: block;
				}
			}
		}

		.CenterTrack-module_center-track-container-2ELhp {
			.TrackControl-module_track-control-2zDf3 { // Menu which appears on hover
				.TrackControl-module_track-control-button-2fdIb { // Hide "add track", "close", & "move" buttons.
					display: none;
					&:first-child {
						display: block;
					}
				}
			}
		}

		.ViewHeader-module_multitrack-header-3XnZx .ViewHeader-module_multitrack-header-nav-list-2nvcu {
			.ViewHeader-module_multitrack-header-icon-squeazed-25lkF:nth-child(3), // Hide 'plus' button in header.
			.ViewHeader-module_multitrack-header-icon-16QKZ:nth-child(3) {
				display: none;
			}
		}

		div[class^="ViewConfigEditor-module_view-config-editor-"] {
			textarea, pre, pre span {
				font-family: $font-family-monospace !important;
			}
		}

		.glyphicon.glyphicon-search {
			&:before {
				content : "\f002";
				font-family: $fa-font-family;
				font-weight: 900;
			}
		}

		.react-grid-layout {
			.form-group {
				div.dropdown.btn-group-sm {
					> .btn.dropdown-toggle {
						padding-right: 24px !important;
					}
				}
				input.GenomePositionSearchBox-module_genome-position-search-bar-1_0ZU {
					font-family: $font-family-monospace;
					font-size: 0.825rem;
				}
			}
		}
	}
}

/** For when HiGlass track is being dragged **/
/**
    All of this 'hide/override via CSS' is kinda hacky anyway, esp. with the PostCSS classNames;
    ideally would be nice if can pass in props to HiGlassComponent
    re: what menu options to include/exclude.
**/

.TiledPlot-module_stylizedItem-2bQBK {
	.TrackControl-module_track-control-2zDf3 { // Menu which appears on hover
		.TrackControl-module_track-control-button-2fdIb { // Hide "add track" button.
			display: none;
			&:nth-child(2),
			&:last-child,
			&:first-child {
				display: block;
			}
		}
	}
}

/* Disabled for now - can't reliably target menu items (same classNames)
.hg-popup {
	.context-menu-item > div {
		> .ContextMenu-module_context-menu-hr-3yapb:nth-child(4),
		> .ContextMenu-module_context-menu-item-1HeVv:nth-child(5) {
			display: none;
		}
	}
	> .ContextMenu-module_context-menu-2OwvL {
		.ContextMenu-module_context-menu-item-1HeVv:nth-child(6),
		.ContextMenu-module_context-menu-item-1HeVv:nth-child(8) {
			display: none;
		}
	}
}
*/


/**********************************************************
  PedigreeViz View Tab (CaseView, IndividualView, ...)
**********************************************************/

.item-page-container {

	.pedigree-tab-view-body-container {
		// When within own top-level pane

		.pedigree-viz-container {
			// We make this almost full height.
			// - IMPORTANT -
			// Equivalent of this is performed in JS in PedigreeViz, for browsers
			// which do not yet support calc().
			// If change size of footer, header, navbar, sub-navbar, etc. then this 216px must
			// be adjusted here and in JS
			@include navbar-fixed-position {
				min-height: $inner-tab-contents-full-height !important;
			}
		}


		/** CGAP-specific full screen view styling **/

		&.view-is-full-screen {
			@include media-breakpoint-up(md){
				position: fixed;
				object-fit: contain;
				width: 100%;
				width: 100vw;
				min-width: 100vw;
				height: 100%;
				height: 100vh;
				min-height: 100vh;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
			}
		}

		&.view-is-full-screen,
		&.browser-is-full-screen {

			.pedigree-viz-container {

				@include media-breakpoint-up(md){
					> .detail-pane-container {
						.detail-pane-inner {
							top: 0px !important;
						}
					}
				}

			}

		}

	}

	/** DetailPane Legend Body for selecting diseases/features -- CGAP-specific **/

	.detail-pane-container {
		.disease-option {
			display: flex;
			align-items: center;

			.checkbox-with-label {
				flex: 1;
				> label {
					cursor: pointer;
					> input {
						// Override default mr-08
						margin-right: 16px !important;
					}
				}
			}
			.disease-color-patch {
				height: 20px;
				width: 20px;
				line-height: 20px;
				border-radius: 50%;
				transition: background-color .3s;
				text-align: center;
				> span {
					font-size: 0.75rem;
					font-weight: 600;
					top: -2px;
					position: relative;
				}
				@include pedigree-color-cycle-background;
			}

			&:hover {
				background-color: #f4f4f4;
			}
		}
	}


}



/**********************************************************
  VariantSampleView & similar - Annotation & Interpretation Space
**********************************************************/

// TODO maybe move somewhere else
// Is (and should prly remain) a common style we potentially reuse
// when need to block out card contents.

.card {

	.inner-card-section {

		display: flex;
		flex-direction: column;

		.info-header-title { // TODO Rename from "info-" ?

			flex-grow: 0;
			padding: 0 8px;

			display: flex;
			align-items: center;
			justify-content: space-between;
			height: 32px;
			position: relative;
			z-index: 1;

			> .dropdown > .btn-outline-secondary {
				@include button-variant(#fff, #e0e0e0);
			}

			> h4 {
				// todo: maybe add color if to be just for this section (?)
				font-weight: 600;
				margin: 0;
				padding: 0 8px;
				background-color: $card-bg;
			}

			.dropdown {
				background-color: $card-bg;
				> button {
					padding-left: 8px; /* Matches padding-left of the h4 elem, to align all titles at left edge */
					padding-right: 28px;
				}
			}

			+ .info-body {
				border: 1px solid $border-color;
				// TODO maybe use or base off bootstrap vars here instd of hardcoded px vals.
    			padding: 24px 16px 16px;
				margin-top: -16px;
				flex-grow: 1;
				border-radius: $border-radius-sm;
				> * {
					z-index: 1;
				}
			}
		}

	}

}

.sample-variant-annotation-space-body {

	.sv-snv-annotation { // only used when interpretation space is present to ensure contents don't get pushed off page
		@media (min-width:992px) {
			max-width: calc(100% - 375px);
		}
	}

	.card .inner-card-section {
		// TODO: Maybe consider propagating further, overriding btn-outline-secondary or btn-secondary with
		// this (since their defaults look somewhat like disabled - but maybe useful idk)
		> .info-header-title {
			> .dropdown > .btn-outline-secondary {
				@include button-variant(#fff, #e0e0e0);
			}
		}

		.search-view-controls-and-results[data-search-item-type="Gene"] .result-table-detail .gene-tab-body.card-body .row>.col-12.col-md-6.d-flex:first-of-type .inner-card-section:first-of-type {
			// Make transcript selector button push to new line & create space in body for it.
			.info-header-title {
				flex-wrap: wrap;
			}

			.info-body {
				@media (max-width:1300px) and (min-width:768px) {
					padding-top: 50px;
				}

			}
		}
	}

	.info-body.clinvar-info-body {
		/** Add powered by NCBI logo **/
		position: relative;
		&.has-clinvar-response {
			background-image: url("/static/img/NCBI_powered.png");
			// background-size: 153px 72px; // = Full size
			background-size: 115px 54px; // = 3/4 size
			background-position: 98% 6px;
			background-position: calc(100% - 5px) 4px;
			background-repeat: no-repeat;
		}
	}

	.sample-variant-info-header {
		// Ensure we're above other titles/etc.
		// For dropdown
		position: relative;
		z-index: 10;
	}

	.sample-variant-overview-tab-view-container {
		.tabs-column {
			position: relative;
			z-index: 2;
			//flex-grow: 0; // Will adjust via responsive Bootstrap classNames
			//flex-shrink: 0;
			> button.overview-tab {
				height: 48px;
				width: 100%;
				display: block;
				border: none;
				margin-bottom: 5px;
				font-weight: 600;
				border-radius: 0;
				background-color: #beccda;
				color: $primary-dark;
				line-height: 1.125; /* scrunch up the text a little bit if it flows onto a 2nd+ line */
				&[disabled]{
					color: #fff8;
				}
				&[data-active="true"] {
					@extend .card;
					color: $primary-dark;
					display: initial;
					flex-direction: initial;
					@include media-breakpoint-up(lg){
						border-top-right-radius: 0px;
						border-top-right-radius: 0px;
						&:after {
							content: "";
							position: absolute;
							top: 0;
							bottom: 0;
							right: -4px;
							width: 6px;
							background-color: inherit;
							border-top-right-radius: 0px;
							border-bottom-right-radius: 0px;
						}
					}
				}
			}
		}

		.content-column {
			flex-basis: 320px;
			min-width: 320px;
			flex-grow: 1;
			@include media-breakpoint-up(lg){
				&.card {
					// Blend/align the topleft corner with the column of tab links
					border-top-left-radius: 0px;
				}
			}

			.embedded-search-view-outer-container .search-view-controls-and-results {
				&[data-search-item-type="Gene"] .info-header-title .dropdown-menu.show {
					max-height: 180px;
				}
			}
		}
	}

	.interpretation-space-wrapper-column {
		flex-basis: 375px;
	}

	.interpretation-space {
		position: sticky;
		position: -webkit-sticky;
		top: 50px;

		.card-header.interpretation-header {
			background-color: $primary-dark;
			color: #ffffff;
			font-size: 1.1em;

			button:focus {
				outline: thin dotted;
			}
		}

		.card-body {
			.interpretation-tabs {
				border:1px solid lightgray;
				border-radius: 5px;
			}

			.interpretation-panel {
				margin: 10px 0;

				textarea {
					border: 1px solid lightgray;
    				border-radius: 5px;
					padding: 10px;
				}

				.note-field-drop .dropdown.btn-group {
					width: 270px;
					flex-grow: 1;
					
					>button {
						max-width: 100%;
						text-overflow: ellipsis;
						overflow: hidden;
					}
				}
			}
		}
	}
}

@include media-breakpoint-up(lg){
	.sv-browser-settings {
		max-width: 215px;
	}
}


/**********************************************************
		User Profile Page
***********************************************************/

div.user-profile-page {

	@include media-breakpoint-up(md){
		min-height: calc(100vh - 250px); // 250px is sum of header, footer, and page title. If any of those change, this needs updating.
	}


	.panel.user-info,
	.panel.user-work-info {

		// Override of prev CSS
		.col-md-3.text-right.text-left-xs {
			@include media-breakpoint-down(sm){
				text-align: left !important;
			}
		}

		#email {
			font-weight: 500;
		}

		.formatted-info-panel {

			&:not(.no-details){
				/* min-height: 41px; */
			}

			/* When in list (maybe ToDo: li > .formatted-info-panel) ... */
			&.no-details.no-icon.no-label {
				display: inline-block;
				padding: 0;
				vertical-align: text-top;
				max-width: 85%;
				word-break: break-word;
			}

			.block-title,
			.block-title a {
				font-weight: 600;
			}
		}

	}

	.card.user-info {
		/* for fun - comment out bottom transform in Inspect Element */
		transform: rotateZ(0deg) scale3d(1, 1, 1) translateX(0);
		opacity: 1;
		left: 0px;
		transition: transform 1.2s ease-out, opacity 1.5s ease-out, left 1.2s ease-out;
		position: relative;
		z-index: 2;

		&.transition { transform: rotateZ(-900deg) scale3d(0.1, 0.1, 0.1) translateX(-1200px); opacity: 0; left: -900px; }

		.user-title-row-container {
			margin-bottom: 20px;
			border-bottom: 1px solid #eee;
		}

		.user-title {
			font-weight: 300;

			.editable-field-entry {
				//max-width: 50%; // Need to fit 2 inline editable fields on one row for users full name.
				text-overflow: ellipsis;
				.value {
					word-break: break-word;
					.edit-button {
						font-size: 1rem;
					}
				}
			}

		}

		@include media-breakpoint-up(md){

			.user-title {
				/* white-space: nowrap; */
				/* overflow: hidden; */
				text-overflow: ellipsis;
			}
		}

		@include media-breakpoint-down(sm){

			.user-title-col {
				padding-top: 2px;
			}

			.user-title {
				font-size: 2rem;
				font-weight: 400;
				margin-right: 70px;
			}
		}

		div.gravatar-container {
			position: relative;

			img.gravatar {
				width: 70px;
				height: 70px;
				float: right;
				border-radius: $border-radius-base;
			}

			a.edit-button-remote {
				opacity: 0;
				position: absolute;
				background: #fff;
				color: #000;
				top: 0;
				right: 10px;
				line-height: 21px;
				width: 21px;
				padding-left: 2px;
				border-radius: 5px;
				&:after {
					display: none;
					content: none;
				}
			}

			&:hover {
				a.edit-button-remote {
					opacity: 0.5;
					&:hover {
						opacity: 1;
					}
				}
			}

			@include media-breakpoint-down(sm){
				img.gravatar {
					width: 94px; /* Account for border */
					height: 70px;
					position: relative;
					z-index: 2;
					margin-bottom: -70px;
					margin-top: 5px;
					border-left: 24px solid #FFF;
				}
			}
		}

	}

	@include media-breakpoint-up(md){
		.editing .user-title .editable-field-entry.inline:not(.editing) {
			display: inline-block;
			//max-width: 30%;
		}
	}

	.panel.user-work-info {

		> .block-title {
			margin-bottom: 20px;
			padding-bottom: 20px;
			border-bottom: 1px solid #eee;
			padding-top: 0;

			> i.icon.icon-fw {
				margin-right: 5px;
				font-size: 1.5rem;
			}
		}

	}

	.access-keys-container {

		table.access-keys-table {

			tr {
				td {
					border-bottom: 1px solid #eee;
					&.access-key-buttons {
						width: 140px;
						.btn.btn-xs {
							margin: 0 4px;
						}
					}
				}
			}
		}

		#add-access-key.btn{
			float: right;
			min-width: 180px;
		}

		.no-access-keys > hr:first-child {
			margin-top: 0;
			margin-bottom: 17px;
		}

	}

}


.qcm-flag[data-flag="fail"] {
	color: rgb(178, 67, 66);
}

.qcm-flag[data-flag="warn"] {
	color: rgb(229, 149, 69);
}
